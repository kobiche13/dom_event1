(()=>{"use strict";class e{constructor(e){this.lastCellNumber=void 0,this.fieldCells=e}goblinInit(){setInterval((()=>{this.checkGoblin=document.querySelector(".goblin"),null!==this.checkGoblin&&this.checkGoblin.classList.remove("goblin");const e=Math.floor(Math.random()*this.fieldCells.length);this.lastCellNumber===e&&this.fieldCells.splice(e,1),this.fieldCells[e].classList.add("goblin"),this.lastCellNumber=e}),1500)}goblinClick(e){"click"==e.type&&(e.target.classList.contains("game-field_cell")&&e.target.classList.contains("goblin")?(this.scoreText.textContent++,e.target.classList.remove("goblin")):e.target.classList.contains("game-field_cell")&&(this.health.style.backgroundPosition=`-5px -${this.healthPosition}px`,this.healthPosition=this.healthPosition+44,console.log(this.healthPosition),269===this.healthPosition&&(clearInterval(1),this.gameOver())))}}class t{constructor(e){this.сountCell=e,this.healthPosition=49}startWindow(){const e=document.createElement("div");e.className="header-container",document.body.appendChild(e),this.searchHeaderContainer=document.querySelector(".header-container"),this.appendInHeader("btn btn-start","button"),this.btnStart=document.querySelector(".btn"),document.body.addEventListener("click",this.checkClick.bind(this)),document.body.addEventListener("mouseover",this.checkMouseover.bind(this)),document.body.addEventListener("mouseout",this.checkMousout.bind(this))}appendInHeader(e,t){const s=document.createElement(t);s.className=e,this.searchHeaderContainer.appendChild(s)}checkClick(t){if("click"==t.type)if(t.target.classList.contains("btn-start"))t.target.style.backgroundPosition="-35px -123px",this.createGameField(),this.changeBtn("btn-start","btn-restart"),this.addScore(),this.addHealth(),this.createGoblin=new e(this.gameFieldCells),this.createGoblin.goblinInit(),this.addProperty(),this.searchField.addEventListener("mousedown",this.cursor.bind(this)),this.searchField.addEventListener("mouseup",this.cursor.bind(this)),this.searchField.addEventListener("click",this.createGoblin.goblinClick.bind(this));else if(t.target.classList.contains("btn-restart")){t.target.style.backgroundPosition="-686px -123px",this.searchField.remove(),this.score.remove(),this.health.remove();const e=document.querySelector(".gameover-container");null!==e&&e.remove(),this.changeBtn("btn-restart","btn-start"),this.healthPosition=49}}checkMouseover(e){"mouseover"==e.type&&(e.target.classList.contains("btn-start")?e.target.style.backgroundPosition="-35px -74px":e.target.classList.contains("btn-restart")?e.target.style.backgroundPosition="-686px -74px":e.target.classList.contains("game-field_cell")&&(this.gameFieldCell=document.querySelector(".game-field_cell"),e.target.style.cursor="pointer)"))}checkMousout(e){"mouseout"==e.type&&(e.target.classList.contains("btn-start")?e.target.style.backgroundPosition="-35px -25px":e.target.classList.contains("btn-restart")&&(e.target.style.backgroundPosition="-686px -25px"))}createGameField(){const e=document.createElement("div");e.className="game-field",document.body.append(e);const t=document.querySelector(".game-field");for(let e=0;e<this.сountCell;e+=1){const e=document.createElement("div");e.className="game-field_cell",t.append(e)}this.gameFieldCells=Array.from(document.querySelectorAll(".game-field_cell")),document.body.style.alignItems="normal"}changeBtn(e,t){const s=document.querySelector("."+e);s.style.backgroundPosition=null,s.classList.remove(e),s.classList.add(t)}addHealth(){this.appendInHeader("header-container__health","div"),document.querySelector(".header-container__health").style.display="block"}addScore(){const e=document.createElement("div");e.className="header-container__score",this.searchHeaderContainer.appendChild(e),this.searchHeaderContainerScore=document.querySelector(".header-container__score"),this.addScoreChild()}addScoreChild(){const e=document.createElement("div");e.className="header-container__score-img",this.searchHeaderContainerScore.appendChild(e);const t=document.createElement("div");t.className="header-container__score-text",t.textContent=0,this.searchHeaderContainerScore.appendChild(t)}cursor(e){"mousedown"==e.type?e.target.classList.contains("game-field_cell")&&e.target.classList.add("mosedown"):"mouseup"==e.type&&e.target.classList.contains("game-field_cell")&&e.target.classList.remove("mosedown")}addProperty(){this.searchField=document.querySelector(".game-field"),this.scoreText=document.querySelector(".header-container__score-text"),this.health=document.querySelector(".header-container__health"),this.score=document.querySelector(".header-container__score")}gameOver(){if(269===this.healthPosition){const e=document.createElement("div");e.className="gameover-container",document.body.appendChild(e);const t=document.querySelector(".gameover-container"),s=document.createElement("img");s.src="../src/img/gameover.png",s.className="gameover-window",t.appendChild(s);const a=document.createElement("button");a.className="btn btn-restart",t.appendChild(a)}}}class s{constructor(){}initGameField(){this.game=new t(16),this.game.startWindow()}}window.addEventListener("load",(()=>{(new s).initGameField()}))})();